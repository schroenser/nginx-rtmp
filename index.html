<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Stream</title>
        <link
            href="//vjs.zencdn.net/7.11.4/video-js.min.css"
            rel="stylesheet">
        <link
            href="//cdn.jsdelivr.net/npm/@silvermine/videojs-chromecast@1.2.2/dist/silvermine-videojs-chromecast.css"
            rel="stylesheet">
        <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/@silvermine/videojs-airplay@1.0.1/dist/silvermine-videojs-airplay.css">
        <link
            href="index.css"
            rel="stylesheet">
        <script src="//vjs.zencdn.net/7.11.4/video.min.js"></script>
        <script src="//cdn.jsdelivr.net/npm/@silvermine/videojs-chromecast@1.2.2/dist/silvermine-videojs-chromecast.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@silvermine/videojs-airplay@1.0.1/dist/silvermine-videojs-airplay.min.js"></script>
        <script
            type="text/javascript"
            src="//www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1"></script>
    </head>
    <body>
        <video
            id="player"
            class="video-js"></video>
        <script>
            var player = videojs('#player', {
                autoplay: 'any',
                controls: true,
                fill: true,
                liveui: true,
                techOrder: ['chromecast', 'html5'],
                plugins: {
                    chromecast: {},
                    airPlay: {}
                }
            });
            window.onhashchange = function() {
                player.src({
                    src: window.location.origin + '/hls/' + window.location.hash.substring(1) + '.m3u8',
                    type: 'application/x-mpegURL'
                });
            };
            player.src({
                src: window.location.origin + '/hls/' + window.location.hash.substring(1) + '.m3u8',
                type: 'application/x-mpegURL'
            });
        </script>
    </body>
</html>
