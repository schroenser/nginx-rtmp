<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Stream</title>
        <link
            rel="shortcut icon"
            href="favicon.ico">
        <link
            href="video-js.min.css"
            rel="stylesheet">
        <link
            href="silvermine-videojs-chromecast.css"
            rel="stylesheet">
        <link
            rel="stylesheet"
            href="silvermine-videojs-airplay.css">
        <link
            href="index.css"
            rel="stylesheet">
        <script src="video.min.js"></script>
        <script src="silvermine-videojs-chromecast.min.js"></script>
        <script src="silvermine-videojs-airplay.min.js"></script>
        <script
            type="text/javascript"
            src="cast_sender.js"></script>
    </head>
    <body>
        <video
            id="player"
            class="video-js"></video>
        <script>
            var player = videojs('#player', {
                autoplay: 'any',
                controls: true,
                fill: true,
                liveui: true,
                techOrder: ['chromecast', 'html5'],
                plugins: {
                    chromecast: {},
                    airPlay: {}
                }
            });
            window.onhashchange = function() {
                let streamKey = window.location.hash.substring(1);
                document.title = 'Stream - ' + streamKey;
                player.src({
                    src: window.location.origin + '/hls/' + streamKey + '.m3u8',
                    type: 'application/x-mpegURL'
                });
            };
            let streamKey = window.location.hash.substring(1);
            document.title = 'Stream - ' + streamKey;
            player.src({
                src: window.location.origin + '/hls/' + streamKey + '.m3u8',
                type: 'application/x-mpegURL'
            });
        </script>
    </body>
</html>
